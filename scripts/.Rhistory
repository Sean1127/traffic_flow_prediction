time_chart[1,1,1] = 4
time_chart[1,1] = 4
help(array)
x=array(data = NA,dim = c(4,3,2))
x
x[1,1]
x[1,1,1]
x[1,1,2]
x[1,1]
x[1,1,]
x[,,1]
x[,,1] = data.frame(x[,,1])
x[,,1]
rm(list=ls())
setwd("R/kdd/scripts/")
train_avg_time = read.csv("time_old.csv")
train_avg_volumn = read.csv("volumn_old.csv")
gate_id = c(A_2 = 1,A_3 = 2,B_1 = 3,B_3 = 4,C_1 = 5,C_3 = 6)
col_name = c("00:00","00:20", "00:40", "01:00","01:20", "01:40",
"02:00","02:20", "02:40", "03:00","03:20", "03:40",
"04:00","04:20", "04:40", "05:00","05:20", "05:40",
"06:00","06:20", "06:40", "07:00","07:20", "07:40",
"08:00","08:20", "08:40", "09:00","09:20", "09:40",
"10:00","10:20", "10:40", "11:00","11:20", "11:40",
"12:00","12:20", "12:40", "13:00","13:20", "13:40",
"14:00","14:20", "14:40", "15:00","15:20", "15:40",
"16:00","16:20", "16:40", "17:00","17:20", "17:40",
"18:00","18:20", "18:40", "19:00","19:20", "19:40",
"20:00","20:20", "20:40", "21:00","21:20", "21:40",
"22:00","22:20", "22:40", "23:00","23:20", "23:40")
row_name = c(unique(substr(train_avg_time$time_window, 2, 11)))
time_chart = array(dim = c(91,72,6))
gate = paste(train_avg_time$intersection_id[i],train_avg_time$tollgate_id[i],sep = "_")
for(i in 1:length(train_avg_time[,1]))
{
gate = paste(train_avg_time$intersection_id[i],train_avg_time$tollgate_id[i],sep = "_")
}
gate
time_chart[,,gate]
time_chart[1,1,gate]
gate
gate_id
time_chart[1,1,gate_id[gate]]
rownames(time_chart[,,1]) = row_name
rownames(time_chart[,,2]) = row_name
rownames(time_chart[,,3]) = row_name
time_chart = array(dim = c(91,72,6))
for(i in 1:6)
{
rownames(time_chart[,,i]) = row_name
}
time_chart
row_name
rm(ls())
rm(list = ls())
train_avg_time = read.csv("time_old.csv")
train_avg_volumn = read.csv("volumn_old.csv")
gate_id = c(A_2 = 1,A_3 = 2,B_1 = 3,B_3 = 4,C_1 = 5,C_3 = 6)
col_name = c("00:00","00:20", "00:40", "01:00","01:20", "01:40",
"02:00","02:20", "02:40", "03:00","03:20", "03:40",
"04:00","04:20", "04:40", "05:00","05:20", "05:40",
"06:00","06:20", "06:40", "07:00","07:20", "07:40",
"08:00","08:20", "08:40", "09:00","09:20", "09:40",
"10:00","10:20", "10:40", "11:00","11:20", "11:40",
"12:00","12:20", "12:40", "13:00","13:20", "13:40",
"14:00","14:20", "14:40", "15:00","15:20", "15:40",
"16:00","16:20", "16:40", "17:00","17:20", "17:40",
"18:00","18:20", "18:40", "19:00","19:20", "19:40",
"20:00","20:20", "20:40", "21:00","21:20", "21:40",
"22:00","22:20", "22:40", "23:00","23:20", "23:40")
row_name = c(unique(substr(train_avg_time$time_window, 2, 11)))
time_chart = array(dim = c(91,72,6))
for(i in 1:6)
{
rownames(time_chart[,,i]) = row_name
colnames(time_chart[,,i]) = col_name
}
time_chart[,,1]
x = time_chart[,,1]
View(x)
rownames(x) = row_name
x
typeof(x)
typeof(time_chart[,,1])
dim(x)
dim(time_chart[,,1])
summary(x)
summary(time_chart[,,1])
rownames(time_chart[,,i]) = row_name
View(x)
time_chart
time_chart = data.frame(time_chart)
View(time_chart)
time_chart[,,1]
rownames(time_chart[,,i]) = row_name
rownames(time_chart[,,1]) = row_name
rm(x)
rm (time_chart)
rm(i)
setwd("R/kdd/scripts/")
train_avg_time = read.csv("time_old.csv")
train_avg_volumn = read.csv("volumn_old.csv")
gate_id = c(A_2 = 1,A_3 = 2,B_1 = 3,B_3 = 4,C_1 = 5,C_3 = 6)
col_name = c("00:00","00:20", "00:40", "01:00","01:20", "01:40",
"02:00","02:20", "02:40", "03:00","03:20", "03:40",
"04:00","04:20", "04:40", "05:00","05:20", "05:40",
"06:00","06:20", "06:40", "07:00","07:20", "07:40",
"08:00","08:20", "08:40", "09:00","09:20", "09:40",
"10:00","10:20", "10:40", "11:00","11:20", "11:40",
"12:00","12:20", "12:40", "13:00","13:20", "13:40",
"14:00","14:20", "14:40", "15:00","15:20", "15:40",
"16:00","16:20", "16:40", "17:00","17:20", "17:40",
"18:00","18:20", "18:40", "19:00","19:20", "19:40",
"20:00","20:20", "20:40", "21:00","21:20", "21:40",
"22:00","22:20", "22:40", "23:00","23:20", "23:40")
row_name = c(unique(substr(train_avg_time$time_window, 2, 11)))
time_chart = array(dim = c(91,72,6))
for(i in 1:6)
{
rownames(time_chart[,,i]) = row_name
colnames(time_chart[,,i]) = col_name
}
View(train_avg_time)
View(train_avg_time)
substr(train_avg_time[,3],start = 1,stop = 4)
substr(train_avg_time[1,3],start = 1,stop = 4)
substr(train_avg_time[1,3],start = 1,stop = 9)
substr(train_avg_time[1,3],start = 1,stop = 11)
substr(train_avg_time[1,3],start = 1,stop = 11)+1
for(i in 1:6)
{
rownames(time_chart[,,i]) = row_name
colnames(time_chart[,,i]) = col_name
}
time_chart[1,1,1]
substr(train_avg_time[1,]$time_window, 2, 11)
time_chart["2016-07-19",1,1]
time_chart[1,"2016-07-19",1]
time_chart[1,1,"2016-07-19"]
time_chart = array(dim = c(91,72,6))
for(i in 1:6)
{
rownames(time_chart[,,i]) = c(unique(substr(train_avg_time$time_window, 2, 11)))
colnames(time_chart[,,i]) = col_name
}
time_chart
time_chart = array(data = NA,dim = c(91,72,6),dimnames = c(row_name,col_name,gate_id))
rm(list = ls())
setwd("R/kdd/scripts/")
train_avg_time = read.csv("time_old.csv")
train_avg_volumn = read.csv("volumn_old.csv")
gate_id = c(A_2 = 1,A_3 = 2,B_1 = 3,B_3 = 4,C_1 = 5,C_3 = 6)
gate_id
typeof(gate_id)
gate_id[1]
gate_id["A_2"]
col_name = c("00:00","00:20", "00:40", "01:00","01:20", "01:40",
"02:00","02:20", "02:40", "03:00","03:20", "03:40",
"04:00","04:20", "04:40", "05:00","05:20", "05:40",
"06:00","06:20", "06:40", "07:00","07:20", "07:40",
"08:00","08:20", "08:40", "09:00","09:20", "09:40",
"10:00","10:20", "10:40", "11:00","11:20", "11:40",
"12:00","12:20", "12:40", "13:00","13:20", "13:40",
"14:00","14:20", "14:40", "15:00","15:20", "15:40",
"16:00","16:20", "16:40", "17:00","17:20", "17:40",
"18:00","18:20", "18:40", "19:00","19:20", "19:40",
"20:00","20:20", "20:40", "21:00","21:20", "21:40",
"22:00","22:20", "22:40", "23:00","23:20", "23:40")
row_name = c(unique(substr(train_avg_time$time_window, 2, 11)))
type(row_name)
typeof(row_name)
typeof(col_name)
col_name = c("00:00"=10,"00:20", "00:40", "01:00","01:20", "01:40",
"02:00","02:20", "02:40", "03:00","03:20", "03:40",
"04:00","04:20", "04:40", "05:00","05:20", "05:40",
"06:00","06:20", "06:40", "07:00","07:20", "07:40",
"08:00","08:20", "08:40", "09:00","09:20", "09:40",
"10:00","10:20", "10:40", "11:00","11:20", "11:40",
"12:00","12:20", "12:40", "13:00","13:20", "13:40",
"14:00","14:20", "14:40", "15:00","15:20", "15:40",
"16:00","16:20", "16:40", "17:00","17:20", "17:40",
"18:00","18:20", "18:40", "19:00","19:20", "19:40",
"20:00","20:20", "20:40", "21:00","21:20", "21:40",
"22:00","22:20", "22:40", "23:00","23:20", "23:40")
col_name[1]
col_name[10]
col_name[[10]]
col_name[00:00
]
col_name["00:00"]
typeof(col_name["00:00"])
typeof(col_name["00:00"])+1
paste(typeof(col_name["00:00"]),"ya")
paste(col_name["00:00"],"ya")
paste(col_name[1],"ya")
paste(train_avg_time$intersection_id[i],train_avg_time$tollgate_id[i],sep = "_")
i = 3
paste(train_avg_time$intersection_id[i],train_avg_time$tollgate_id[i],sep = "_")
setwd("R/kdd/scripts/")
train_avg_time = read.csv("time_old.csv")
train_avg_volumn = read.csv("volumn_old.csv")
gate_id = c("A_2","A_3","B_1","B_3","C_1","C_3")
col_name = c("00:00","00:20", "00:40", "01:00","01:20", "01:40",
"02:00","02:20", "02:40", "03:00","03:20", "03:40",
"04:00","04:20", "04:40", "05:00","05:20", "05:40",
"06:00","06:20", "06:40", "07:00","07:20", "07:40",
"08:00","08:20", "08:40", "09:00","09:20", "09:40",
"10:00","10:20", "10:40", "11:00","11:20", "11:40",
"12:00","12:20", "12:40", "13:00","13:20", "13:40",
"14:00","14:20", "14:40", "15:00","15:20", "15:40",
"16:00","16:20", "16:40", "17:00","17:20", "17:40",
"18:00","18:20", "18:40", "19:00","19:20", "19:40",
"20:00","20:20", "20:40", "21:00","21:20", "21:40",
"22:00","22:20", "22:40", "23:00","23:20", "23:40")
row_name = c(unique(substr(train_avg_time$time_window, 2, 11)))
row_name = c(unique(substr(train_avg_time$time_window, 2, 11)))
time_chart = array(data = NA,dim = c(91,72,6),dimnames = c(row_name,col_name,gate_id))
time_chart = array(data = NA,dim = c(91,72,6),dimnames = list(row_name,col_name,gate_id))
time_chart["2016-07-19","00:00","B_1"]
help("array")
date = substr(train_avg_time$time_window[i],2,11)
date
i = 432
date = substr(train_avg_time$time_window[i],2,11)
date
train_avg_time$time_window[i]
rm(list = ls())
source('~/R/kdd/scripts/predata_kdd_1c_ver1.R', echo=TRUE)
getwd()
source('~/R/kdd/scripts/predata_kdd_1c_ver1.R', echo=TRUE)
time_chart
time_chart[,,"A_2"]
A2 = time_chart[,,"A_2"]
View(A2)
rm(A2)
for(i in 1:6)
{
print(gate_id[i])
}
{
date = substr(train_avg_time$time_window[i],2,11)
time = substr(train_avg_time$time_window[i],13,17)
gate = paste(train_avg_time$intersection_id[i],train_avg_time$tollgate_id[i],sep = "_")
time_chart[date,time,gate] = train_avg_time$avg_travel_time[i]
}
A_2 = time_chart[,,"A_2"]
A_3 = time_chart[,,"A_3"]
B_1 = time_chart[,,"B_1"]
B_3 = time_chart[,,"B_3"]
C_1 = time_chart[,,"C_1"]
C_3 = time_chart[,,"C_3"]
View(A_2)
View(A_2)
View(B_1)
rm(A_2,A_3)
rm(list = ls())
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
weekday = 2
weekday_avg = array(NA,7,list("MON","TUE","WED","THU","FRI","SAT","SUN"))
weekday_avg = array(NA,7,c("MON","TUE","WED","THU","FRI","SAT","SUN"))
weekday_avg = array(NA,7,list(c("MON","TUE","WED","THU","FRI","SAT","SUN"))
for(i in 1:91)
{
weekday = weekday + 1
if(weekday == 8) weekday = 1
}
weekday = 2
weekday_avg = array(NA,7,list(c("MON","TUE","WED","THU","FRI","SAT","SUN"))
for(i in 1:91)
{
weekday = weekday + 1
if(weekday == 8) weekday = 1
}
weekday_avg = array(NA,7,list(c("MON","TUE","WED","THU","FRI","SAT","SUN")))
weekday_avg
weekday_avg = numeric(7)
weekday = 2
weekday_sum = numeric(7)
weekday_num = numeric(7)
weekday_avg = weekday_sum/weekday_num
time_chart[1,1,1]
if(time_chart[1,1,1]) x = 2
time_chart[1,1,1]
time_chart[1,1,1] == NA
(time_chart[1,1,1] == NA)
TRUE
if(TRUE) i = 9
if(NA) i = 9
if(time_chart[1,1,1] == NA) i = 9
time_chart[1,2,3]
time_chart[1,2,2]
time_chart[1,1,2]
time_chart[1,2,"A_3"]
time_chart[1,2,"B_1"]
time_chart[,,1]
help(matrix())
help(matrix
)
m=matrix(NA,1,2)
m
day = 2
week_sum = matrix(0,7,6)
week_num = matrix(0,7,6)
View(week_num)
rm(m)
week_sum
rm(list = ls())
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
day = 2
week_sum = matrix(0,7,6)
week_num = matrix(0,7,6)
for(i in 1:6)
{
for(j in 1:91)
{
#0:00-6:00
for(k in 1:18)
{
if(!is.na(time_chart[j,k,i]))
{
week_num[day,i] = week_num[day,i] + 1
week_sum[day,i] = week_sum[day,i] + time_chart[j,k,i]
}
}
#10:00-15:00
for(k in 30:45)
{
if(!is.na(time_chart[j,k,i]))
{
week_num[day,i] = week_num[day,i] + 1
week_sum[day,i] = week_sum[day,i] + time_chart[j,k,i]
}
}
#19:00-24:00
for(k in 51:72)
{
if(!is.na(time_chart[j,k,i]))
{
week_num[day,i] = week_num[day,i] + 1
week_sum[day,i] = week_sum[day,i] + time_chart[j,k,i]
}
}
day = day + 1
if(day == 8) day = 1
}
}
week_avg = week_sum/week_num
View(week_avg)
View(week_num)
View(week_sum)
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
View(week_avg)
View(week_num)
weekday = c("MON","TUE","WED","THU","FRI","SAT","SUN")
week_sum = matrix(0,7,6,dimnames = list(weekday,gate_id))
week_num = matrix(0,7,6,dimnames = list(weekday,gate_id))
week_avg = matrix(0,7,6,dimnames = list(weekday,gate_id))
for(i in 1:6)
{
day = 2
for(j in 1:91)
{
#0:00-6:00
for(k in 1:18)
{
if(!is.na(time_chart[j,k,i]))
{
week_num[day,i] = week_num[day,i] + 1
week_sum[day,i] = week_sum[day,i] + time_chart[j,k,i]
}
}
#10:00-15:00
for(k in 30:45)
{
if(!is.na(time_chart[j,k,i]))
{
week_num[day,i] = week_num[day,i] + 1
week_sum[day,i] = week_sum[day,i] + time_chart[j,k,i]
}
}
#19:00-24:00
for(k in 51:72)
{
if(!is.na(time_chart[j,k,i]))
{
week_num[day,i] = week_num[day,i] + 1
week_sum[day,i] = week_sum[day,i] + time_chart[j,k,i]
}
}
day = day + 1
if(day == 8) day = 1
}
}
week_avg = week_sum/week_num
weekday = c("MON","TUE","WED","THU","FRI","SAT","SUN")
week_sum = matrix(0,7,6,dimnames = list(weekday,gate_id))
week_num = matrix(0,7,6,dimnames = list(weekday,gate_id))
week_avg = matrix(0,7,6,dimnames = list(weekday,gate_id))
for(i in 1:6)
{
day = 2
for(j in 1:91)
{
#0:00-6:00
for(k in 1:18)
{
if(!is.na(time_chart[j,k,i]))
{
week_num[day,i] = week_num[day,i] + 1
week_sum[day,i] = week_sum[day,i] + time_chart[j,k,i]
}
}
#10:00-15:00
for(k in 30:45)
{
if(!is.na(time_chart[j,k,i]))
{
week_num[day,i] = week_num[day,i] + 1
week_sum[day,i] = week_sum[day,i] + time_chart[j,k,i]
}
}
#19:00-24:00
for(k in 51:72)
{
if(!is.na(time_chart[j,k,i]))
{
week_num[day,i] = week_num[day,i] + 1
week_sum[day,i] = week_sum[day,i] + time_chart[j,k,i]
}
}
day = day + 1
if(day == 8) day = 1
}
}
View(week_avg)
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
View(week_avg)
A_2 = time_chart[,,"A_2"]
View(A_2)
help("numeric")
l = numeric(4)
l
l
l + c(1,2,3,4)
l
l[1]
l[1] = 3
l[2] = 8
l
l = numeric(4)
l
week_avg = array(NA,c(7,72,6),list(weekday,time_label,gate_id))
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
week_avg
View(A_2)
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
View(aggr_A_2)
View(A_2)
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
max(aggr_A_2[,1])
whichmax(aggr_A_2[,1])
which.max(aggr_A_2[,1])
for(i in 1:72) which.max(aggr_A_2[,1])
for(i in 1:72) print(which.max(aggr_A_2[,1]))
for(i in 1:72) print(which.max(aggr_A_2[,i]))
st = numeric(72)
for(i in 1:72) st[i] = which.max(aggr_A_2[,i])
st
summary(st)
st = factor(st)
summary(st)
help("factor")
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
source('~/R/kdd/scripts/training_20min_avg_data_chart.R', echo=TRUE)
warnings()
max_day = numeric(72)
for(i in time_label)
{
max_day[i] = which.max(aggr_A_2[,i])
}
max_day
A_2 = time_chart[,,"A_2"]
aggr_A_2 = week_avg[,,"A_2"]
max_day = numeric(72)
for(i in 1:72)
{
max_day[i] = which.max(aggr_A_2[,i])
}
max_day
max_day = factor(numeric(72))
for(i in 1:72)
{
max_day[i] = which.max(aggr_A_2[,i])
}
max_day
A_2 = time_chart[,,"A_2"]
aggr_A_2 = week_avg[,,"A_2"]
max_day = numeric(72)
for(i in 1:72)
{
max_day[i] = which.max(aggr_A_2[,i])
}
max_day = factor(max_day)
max_day
summary(max_day)
max_day = numeric(72)
for(i in 1:72)
{
max_day[i] = which.max(aggr_A_2[,i])
}
summary(factor(max_day))
